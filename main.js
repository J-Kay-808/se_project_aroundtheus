!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove()}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._deleteButton=this._cardElement.querySelector(".delete__button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this.disableButton()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this._setEventListeners(),this._toggleButtonState()}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}}class s{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t),this._closeButton=this._modalElement.querySelector(".modal__close"),this.close=this.close.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleClickOverlay)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleClickOverlay)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleClickOverlay=e=>{e.target.classList.contains("modal")&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class n extends s{constructor(e,t){super({modalSelector:e}),this._form=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputEl=this._modalElement.querySelectorAll(".modal__form-input")}_getInputValues(){return this._inputValues={},this._inputEl.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._form.reset(),this.close()}))}}class r{constructor(e){let{profileTitle:t,profileDescription:s}=e;this._name=document.querySelector(t),this._description=document.querySelector(s)}getUserInfo(){return this._userData={name:this._name.textContent,description:this._description.textContent},this._userData}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._description.textContent=s}}const i={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};document.querySelector("#profile-title"),document.querySelector("#profile-description");const o=document.querySelector("#profile-edit-button"),a=(document.forms["profile-modal-form"],document.querySelector("#modal-title-input")),l=document.querySelector("#modal-description-input"),c=(document.querySelector("#card-title-input"),document.querySelector("#card-url-input"),document.querySelector("#add-card-modal"),document.forms["modal-add-form"],document.querySelector("#profile-add-button")),d=new class{constructor(e){this.baseUrl=e.baseUrl,this.header=e.header}getInitialCards(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"eb6ee572-474c-4d4a-85f4-86f04274af5e",method:"GET"}}).then((e=>e.json())).then((e=>e)).catch((e=>{console.log(e)}))}renderUserInfo(e){const t=document.querySelector(".profile__title"),s=document.querySelector(".profile__subtitle"),n=document.querySelector(".profile__avatar");t&&(t.textContent=e.name),s&&(s.textContent=e.about),n&&(n.src=e.avatar)}getUserInfo(){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{headers:{authorization:"eb6ee572-474c-4d4a-85f4-86f04274af5e"}}).then((e=>e.json())).then((e=>(this.renderUserInfo(e),e))).catch((e=>{console.log(e)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"eb6ee572-474c-4d4a-85f4-86f04274af5e","Content-Type":"application/json"}});d.getInitialCards().then((e=>{console.log(e),e.forEach((e=>{E.addItem(createCard(e))}))})),d.getUserInfo().then((e=>{_.setUserInfo(e)})).catch((e=>{console.error(e)})),document.querySelectorAll(i.formSelector).forEach((e=>{new t(i,e).enableValidation()}));const u=new n("#profile-edit-modal",(function(e){_.setUserInfo({name:e.title,description:e.description}),u.close()})),m=new n("#add-card-modal",(function(e){const t=p({name:e.title,link:e.link});E.addItem(t),m.close()}));u.setEventListeners(),m.setEventListeners(),c.addEventListener("click",(()=>{m.open()}));const h=new class extends s{constructor(e){super({modalSelector:e})}open(e){this._description=this._modalElement.querySelector(".image__description"),this._image=this._modalElement.querySelector(".image__modal"),this._description.textContent=e.name,this._image.src=e.link,this._image.alt=e.name,super.open()}}("#image-modal");h.setEventListeners();const _=new r({profileTitle:".profile__title",profileDescription:".profile__description"});function p(t){return new e(t,"#card-template",f).getView()}const E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this._container.append(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],settings:i,renderer:p},".cards__list");function f(e,t){h.open(e,t)}E.renderItems(),new r("#modal-title-input","#modal-description-input"),o.addEventListener("click",(()=>{const e=_.getUserInfo();a.value=e.name,l.value=e.description,u.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxLQUFNLHlHQUdSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sNEdBR1IsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLHFHQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0scUdBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxtR0N3SE53QixTQUFRLEVBQ1J3SCxTQUFVTixHQUdaLGdCQVNGLFNBQVMvSSxFQUFpQkcsRUFBTUUsR0FDOUIySSxFQUFlcEUsS0FBS3pFLEVBQU1FLEVBQzVCLENBUkFnSSxFQUFZb0IsY0FVQyxJQUFJNUQsRUFBUyxxQkFBc0IsNEJBbUJoRFMsRUFBa0I1RixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNcUosRUFBa0J2QixFQUFTdkMsY0FDakNNLEVBQWdCWixNQUFRb0UsRUFBZ0I1SixLQUN4Q3NHLEVBQXNCZCxNQUFRb0UsRUFBZ0I1RCxZQUM5Q3dDLEVBQVUvRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgLy8gdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZV9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChfaW5wdXRFbCkgPT4ge1xyXG4gICAgICBfaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShfaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKF9pbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKF9pbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIC8vICBCVVRUT05TXHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tPdmVybGF5KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZUNsaWNrT3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlQ2xpY2tPdmVybGF5ID0gKGUpID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRFbCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0RWwuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIGNsb3NlKCkge1xyXG4gIC8vICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIC8vICAgc3VwZXIuY2xvc2UoKTtcclxuICAvLyB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuICIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVUaXRsZSk7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZURlc2NyaXB0aW9uKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fdXNlckRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuLy8gUFJPRklMRSBFRElUIE1PREFMXHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLW1vZGFsLWZvcm1cIl07XHJcbmNvbnN0IG1vZGFsVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IG1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuLy8gTkVXIENBUkQgTU9EQUxcclxuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IGNhcmRVcmxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC11cmwtaW5wdXRcIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJtb2RhbC1hZGQtZm9ybVwiXTtcclxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgICBBcGkuanMgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZWI2ZWU1NzItNDc0Yy00ZDRhLTg1ZjQtODZmMDQyNzRhZjVlXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGhhbmRsZUxpa2VJY29uID0gKGNhcmREYXRhKSA9PiB7XHJcbiAgY29uc29sZS5sb2coY2FyZERhdGEpO1xyXG4gIGFwaVxyXG4gICAgLnRvZ2dsZUxpa2UoY2FyZERhdGEuX2lkLGNhcmREYXRhLl9pc0xpa2VkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkxpa2UgdG9nZ2xlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgIC8vY2FyZERhdGEuaGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHRvZ2dsaW5nIGxpa2U6XCIsIGVycm9yKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlRGVsZXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGRlbGV0ZVBvcHVwLm9wZW4oKTtcclxuICBkZWxldGVQb3B1cC5zZXRTdWJtaXQoKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coY2FyZERhdGEpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmREYXRhLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FyZCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICBjYXJkRGF0YS5yZW1vdmVDYXJkKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChjYXJkcykgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGNhcmRzKTtcclxuICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZCkpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmFwaVxyXG4uZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICBGb3JtVmFsaWRhdG9yLmpzICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmNvbnN0IGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpO1xyXG5cclxuZm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybSk7XHJcbiAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgTW9kYWxXaXRoRm9ybSAgICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBjYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcclxuXHJcbmVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgTW9kYWxXaXRoSW1hZ2UgICAgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5jb25zdCBtb2RhbFdpdGhJbWFnZSA9IG5ldyBNb2RhbFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxubW9kYWxXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgVXNlckluZm8gICAgICAgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZVRpdGxlOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxufSk7XHJcblxyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgIGNhcmQuanMgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGFkZENhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKTtcclxuICByZXR1cm4gYWRkQ2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHNldHRpbmdzLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgfSxcclxuXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pO1xyXG5cclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgRXZlbnQgSGFuZGxlcnMgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBtb2RhbFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFwiI21vZGFsLXRpdGxlLWlucHV0XCIsIFwiI21vZGFsLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZGF0YSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogZGF0YS50aXRsZSwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfSk7XHJcbiAgZWRpdE1vZGFsLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQodXNlckluZm8pIHtcclxuICBjb25zdCBuYW1lID0gdXNlckluZm8udGl0bGU7XHJcbiAgY29uc3QgbGluayA9IHVzZXJJbmZvLmxpbms7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0pO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgY2FyZE1vZGFsLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgbW9kYWxUaXRsZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XHJcbiAgbW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVyID0gb3B0aW9ucy5oZWFkZXI7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkc1wiLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcImViNmVlNTcyLTQ3NGMtNGQ0YS04NWY0LTg2ZjA0Mjc0YWY1ZVwiLFxyXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gIH1cclxuXHJcbiAgcmVuZGVyVXNlckluZm8odXNlckRhdGEpIHtcclxuICAgIGNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuICAgIGNvbnN0IHVzZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcbiAgICBjb25zdCB1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcblxyXG4gICAgaWYgKHVzZXJOYW1lKSB7XHJcbiAgICAgIHVzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuICAgIH1cclxuICAgIGlmICh1c2VyRGVzY3JpcHRpb24pIHtcclxuICAgICAgdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XHJcbiAgICB9XHJcbiAgICBpZiAodXNlckF2YXRhcikge1xyXG4gICAgICB1c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWVcIiwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJlYjZlZTU3Mi00NzRjLTRkNGEtODVmNC04NmYwNDI3NGFmNWVcIixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVyVXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgICAgIHJldHVybiB1c2VyRGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxuXHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2VfX2Rlc2NyaXB0aW9uXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZV9fbW9kYWxcIik7XHJcblxyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuICBcclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG4gIFxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlRWwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiX2Vycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJmb3JFYWNoIiwiX2lucHV0RWwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJyZXNldFZhbGlkYXRpb24iLCJkaXNhYmxlQnV0dG9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9lbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsIk1vZGFsIiwiX3JlZiIsIm1vZGFsU2VsZWN0b3IiLCJfbW9kYWxFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiY2xvc2UiLCJiaW5kIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVDbGlja092ZXJsYXkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsIk1vZGFsV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIlVzZXJJbmZvIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiX2Rlc2NyaXB0aW9uIiwiZ2V0VXNlckluZm8iLCJfdXNlckRhdGEiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJwcm9maWxlRWRpdEJ1dHRvbiIsIm1vZGFsVGl0bGVJbnB1dCIsImZvcm1zIiwibW9kYWxEZXNjcmlwdGlvbklucHV0IiwiYWRkQ2FyZEJ1dHRvbiIsImFwaSIsIm9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVyIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyVXNlckluZm8iLCJ1c2VyRGF0YSIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwidXNlckF2YXRhciIsImFib3V0IiwiYXZhdGFyIiwiY2FyZHMiLCJjYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInVzZXJJbmZvIiwiZXJyb3IiLCJmb3JtIiwiZWRpdE1vZGFsIiwidGl0bGUiLCJjYXJkTW9kYWwiLCJuZXdDYXJkIiwicmVuZGVyQ2FyZCIsIm1vZGFsV2l0aEltYWdlIiwiX2ltYWdlIiwiY2FyZERhdGEiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiY2FyZEVsZW1lbnQiLCJhcHBlbmQiLCJlbGVtZW50IiwicHJlcGVuZCIsImN1cnJlbnRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=